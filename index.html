<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>fetchの使い方</title>
</head>
<body>
  <h1>Fetchでデータを読み込む（関数）-災害伝承碑4-</h1>
  <script>
    //Var FileName='test.json';
    getMarkerData();
    function getMarkerData()　{
            //urlからデータを読み込む
            fetch('test2.json')
            //データを受け取って、加工・成形
              .then(response => {
                //jsonはオブジェクト（連想配列）
                return response.json()
              })
              //取得したデータは連想配列
              .then(array => {
                var markerList;
                for (var i = 0; i < array.length; i++) {
                 alert('ファイルの読み込み成功しましたよ。' + array[i].id + ',' + array[i].name + ',' + array[i].address + '\n')
                  markerList[i][0]=array[i].areaid;
                  markerList[i][1]=array[i].id;
                  markerList[i][2]=array[i].name;
                  markerList[i][3]=array[i].lon;
                  //markerList[i][4]=array[i].lng;
                  //markerList[i][5]=array[i].era;
                  //markerList[i][6]=array[i].address;
                  //markerList[i][7]=array[i].detail;
                  //markerList[i][8]=array[i].file;
                  //markerList[i][9]=array[i].exp;
                  //markerList[i][10]=array[i].dist;
                  //markerList[i][11]=array[i].yn;
                  //markerList[i][12]=array[i].link1;
                  //markerList[i][13]=array[i].link2;
                }
                //alert(markerList);
              })    
              //通信にエラーが発生した場合
              .catch(error => {alert('ファイルを読み込むことができませんでした。')})
    }
</script>  
</body>
</html>
