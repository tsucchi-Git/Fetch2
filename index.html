<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>fetchの使い方</title>
</head>
<body>
  <h1>Fetchでデータを読み込む（関数）-災害伝承碑1-6</h1>
  <script>
    //Var FileName='test.json';
    getMarkerData();
    //alert('return main');
              //for (var i = 0; i < array.length; i++) {
                 //alert('ファイルの読み込み成功しましたよ。' + array[i].id + ',' + array[i].name + ',' + array[i].address + '\n')
                  //let markerList[i][0]=array[i].areaid;
                  //let markerList[i][1]=array[i].id;
                  //let markerList[i][2]=array[i].name;
                  //let markerList[i][3]=array[i].lon;
                  //markerList[i][4]=array[i].lng;
                  //markerList[i][5]=array[i].era;
                  //markerList[i][6]=array[i].address;
                  //markerList[i][7]=array[i].detail;
                  //markerList[i][8]=array[i].file;
                  //markerList[i][9]=array[i].exp;
                  //markerList[i][10]=array[i].dist;
                  //markerList[i][11]=array[i].yn;
                  //markerList[i][12]=array[i].link1;
                  //markerList[i][13]=array[i].link2;
                //}
                //alert(markerList);
    //async function getMarkerData() {
    //   markerList= new array
    //  　try {
    //        const response = await fetch("test2.json");
    //        const data = await response.json();
    //       alert(data.length)
    //        //for(i=0; i=data.length;i++){
    //           alert(data[3].name);
            //}
    //        } 
    //   catch (error) {
    //        alert('error');
    //    }
    //  }
     function getMarkerData()　{
             //urlからデータを読み込む
             fetch('test2.json')
             //データを受け取って、加工・成形
               .then(response => {
                 //jsonはオブジェクト（連想配列）
                 return response.json()
               })
               //取得したデータは連想配列
               .then(array => {
                 alert('ファイルの読み込みは成功しました')
               })    
               //通信にエラーが発生した場合
               .catch(error => {alert('ファイルを読み込むことができませんでした。')})
     }
</script>  
</body>
</html>
